<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Ranking</title>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.0.0/dist/tf.min.js"></script>
</head>
<body>
  <h1>Rate Music Groups</h1>
  <p>Rate the following music groups from 1 to 10:</p>

  <div id="groups-container">
    <!-- Bands will be dynamically generated here -->
  </div>

  <button onclick="processVotes()">Process Information</button>

  <div id="result-container" style="display: none;">
    <h2>Your Music Preferences Ranking</h2>
    <ul id="ranking-list"></ul>
  </div>

  <script>
    // Bands and features data
    const bands = ['Nirvana', 'Nine Inch Nails', 'Backstreet Boys', 'N Sync', 'Night Club', 'Apashe', 'STP'];
    const features = ['Grunge', 'Rock', 'Industrial', 'Boy Band', 'Dance', 'Techno'];

    // Create HTML elements for each band
    const groupsContainer = document.getElementById('groups-container');
    bands.forEach((band, index) => {
      const groupDiv = document.createElement('div');
      groupDiv.innerHTML = `
        <p>${band}</p>
        <input type="number" min="1" max="10" id="group${index}" />
      `;
      groupsContainer.appendChild(groupDiv);
    });

    // Process user votes
    function processVotes() {
      const userVotes = [];
      bands.forEach((band, index) => {
        const voteInput = document.getElementById(`group${index}`);
        userVotes.push(parseInt(voteInput.value));
      });

      // Calculate user's favorite styles
      const userVotesTensor = tf.tensor([userVotes]);
      const bandFeatsTensor = tf.tensor([
        [1, 1, 0, 0, 0, 0],
        [1, 0, 1, 0, 0, 0],
        [0, 0, 0, 1, 1, 0],
        [0, 0, 0, 1, 0, 0],
        [0, 0, 1, 0, 0, 1],
        [0, 0, 1, 0, 0, 1],
        [1, 1, 0, 0, 0, 0],
      ]);

      const userFeatsTensor = tf.matMul(userVotesTensor, bandFeatsTensor);
      const topUserFeatures = tf.topk(userFeatsTensor, features.length);
      const topGenresIndices = topUserFeatures.indices.arraySync()[0];

      // Display the ranking
      const resultContainer = document.getElementById('result-container');
      const rankingList = document.getElementById('ranking-list');
      rankingList.innerHTML = '';
      topGenresIndices.forEach((index) => {
        const genre = features[index];
        const li = document.createElement('li');
        li.textContent = genre;
        rankingList.appendChild(li);
      });

      resultContainer.style.display = 'block';
    }
  </script>
</body>
</html>
